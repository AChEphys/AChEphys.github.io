<!doctype html>
<html style='font-size:13px !important'>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>微机原理期末复习</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 30px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 4px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }
#md-notification .btn { border: 0px; }
.dropdown-menu .divider { border-color: rgb(229, 229, 229); }





 .typora-export p, .typora-export .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>微机原理期末复习</h1><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n0">微机原理期末复习</a></span><span class="md-toc-item md-toc-h3" data-ref="n19"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n19">8086处理器</a></span><span class="md-toc-item md-toc-h3" data-ref="n53"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n53">指令系统与汇编语言</a></span><span class="md-toc-item md-toc-h3" data-ref="n159"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n159">储存器编制</a></span><span class="md-toc-item md-toc-h3" data-ref="n211"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n211">IO与中断</a></span><span class="md-toc-item md-toc-h3" data-ref="n288"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n288">可编程IO接口芯片</a></span><span class="md-toc-item md-toc-h4" data-ref="n289"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n289">8259A 中断控制器</a></span><span class="md-toc-item md-toc-h4" data-ref="n372"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n372">8255A 并行接口芯片</a></span><span class="md-toc-item md-toc-h4" data-ref="n405"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n405">8253 定时器</a></span><span class="md-toc-item md-toc-h4" data-ref="n480"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n480">8251 串行通信芯片</a></span><span class="md-toc-item md-toc-h4" data-ref="n548"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n548">8237A DMA控制器</a></span><span class="md-toc-item md-toc-h3" data-ref="n295"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n295">总线</a></span></p></div><ul><li><p>补码：取反加一。</p></li><li><p>可编程芯片，它们是</p><ul><li>8259A：中断控制器</li><li>8255A：并行通信</li><li>8253：定时器</li><li>8251：串行通信</li><li>8237：DMA控制器</li></ul></li></ul><h3><a name='header-n19' class='md-header-anchor '></a>8086处理器</h3><ul><li><p>FLAGS</p><ul><li>单步中断允许TF=1；可屏蔽中断允许IF=1；串操作从低地址到高地址DF=0. </li><li>加减法最高位进位借位CF=1；最高位与次高位进位不同时OF=1；<mark>不论是字节运算还是字运算，当低8位1的个数为偶数时PF=1</mark>；<mark>不论是字运算还是字节运算，当低4位向高位进位或借位时AF=1</mark>（用于BCD码调整）；SF与运算的最高位相同；结果为0时ZF=1.</li></ul></li><li><p>地址锁存器 8282 / 74LS373. 对于8282，8位，锁存使能<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.504ex" height="2.887ex" viewBox="0 -1117.1 1508.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E1-MJMAIN-4F" d="M56 340Q56 423 86 494T164 610T270 680T388 705Q521 705 621 601T722 341Q722 260 693 191T617 75T510 4T388 -22T267 3T160 74T85 189T56 340ZM467 647Q426 665 388 665Q360 665 331 654T269 620T213 549T179 439Q174 411 174 354Q174 144 277 61Q327 20 385 20H389H391Q474 20 537 99Q603 188 603 354Q603 411 598 439Q577 592 467 647Z"></path><path stroke-width="0" id="E1-MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path><path stroke-width="0" id="E1-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E1-MJMAIN-4F"></use><use xlink:href="#E1-MJMAIN-45" x="778" y="0"></use></g><g transform="translate(0,520)"><use transform="scale(0.707)" xlink:href="#E1-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(73.97924780100689,0) scale(3.7156165858790735,1)"><use transform="scale(0.707)" xlink:href="#E1-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E1-MJMAIN-AF" x="1633" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{OE}}</script>，锁存触发<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.613ex" height="2.168ex" viewBox="0 -807.4 1986 933.3" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E2-MJMAIN-53" d="M55 507Q55 590 112 647T243 704H257Q342 704 405 641L426 672Q431 679 436 687T446 700L449 704Q450 704 453 704T459 705H463Q466 705 472 699V462L466 456H448Q437 456 435 459T430 479Q413 605 329 646Q292 662 254 662Q201 662 168 626T135 542Q135 508 152 480T200 435Q210 431 286 412T370 389Q427 367 463 314T500 191Q500 110 448 45T301 -21Q245 -21 201 -4T140 27L122 41Q118 36 107 21T87 -7T78 -21Q76 -22 68 -22H64Q61 -22 55 -16V101Q55 220 56 222Q58 227 76 227H89Q95 221 95 214Q95 182 105 151T139 90T205 42T305 24Q352 24 386 62T420 155Q420 198 398 233T340 281Q284 295 266 300Q261 301 239 306T206 314T174 325T141 343T112 367T85 402Q55 451 55 507Z"></path><path stroke-width="0" id="E2-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E2-MJMAIN-42" d="M131 622Q124 629 120 631T104 634T61 637H28V683H229H267H346Q423 683 459 678T531 651Q574 627 599 590T624 512Q624 461 583 419T476 360L466 357Q539 348 595 302T651 187Q651 119 600 67T469 3Q456 1 242 0H28V46H61Q103 47 112 49T131 61V622ZM511 513Q511 560 485 594T416 636Q415 636 403 636T371 636T333 637Q266 637 251 636T232 628Q229 624 229 499V374H312L396 375L406 377Q410 378 417 380T442 393T474 417T499 456T511 513ZM537 188Q537 239 509 282T430 336L329 337H229V200V116Q229 57 234 52Q240 47 334 47H383Q425 47 443 53Q486 67 511 104T537 188Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E2-MJMAIN-53"></use><use xlink:href="#E2-MJMAIN-54" x="556" y="0"></use><use xlink:href="#E2-MJMAIN-42" x="1278" y="0"></use></g></svg></span><script type="math/tex">\text{STB}</script>下降沿（来自ALE的下降沿）。</p></li><li><p>总线驱动器 8286 / 74LS245. 对于8286，8位，芯片使能<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.439ex" height="2.743ex" viewBox="0 -1117.1 1480.5 1181.1" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E3-MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path><path stroke-width="0" id="E3-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E3-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E3-MJMAIN-45"></use><use xlink:href="#E3-MJMAIN-4E" x="681" y="0"></use></g><g transform="translate(0,498)"><use transform="scale(0.707)" xlink:href="#E3-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(79.33104835502351,0) scale(3.605926891290579,1)"><use transform="scale(0.707)" xlink:href="#E3-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E3-MJMAIN-AF" x="1593" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{EN}}</script>，输入输出方向控制<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.677ex" height="1.88ex" viewBox="0 -745.4 722 809.4" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E4-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E4-MJMAIN-54" x="0" y="0"></use></g></svg></span><script type="math/tex">\text{T}</script>.</p></li><li><p>HOLD外设总线请求；HLDA总线请求应答；DT/<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.824ex" height="2.887ex" viewBox="0 -1117.1 785.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E5-MJMAIN-52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"></path><path stroke-width="0" id="E5-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E5-MJMAIN-52" x="24" y="0"></use><g transform="translate(0,498)"><use transform="scale(0.707)" xlink:href="#E5-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(212.17038353507894,0) scale(0.8832719720404374,1)"><use transform="scale(0.707)" xlink:href="#E5-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E5-MJMAIN-AF" x="610" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text R}</script> 接8286的T控制数据总线方向；<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.213ex" height="2.743ex" viewBox="0 -1117.1 2244.5 1181.1" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E6-MJMAIN-44" d="M130 622Q123 629 119 631T103 634T60 637H27V683H228Q399 682 419 682T461 676Q504 667 546 641T626 573T685 470T708 336Q708 210 634 116T442 3Q429 1 228 0H27V46H60Q102 47 111 49T130 61V622ZM593 338Q593 439 571 501T493 602Q439 637 355 637H322H294Q238 637 234 628Q231 624 231 344Q231 62 232 59Q233 49 248 48T339 46H350Q456 46 515 95Q561 133 577 191T593 338Z"></path><path stroke-width="0" id="E6-MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path><path stroke-width="0" id="E6-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E6-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E6-MJMAIN-44"></use><use xlink:href="#E6-MJMAIN-45" x="764" y="0"></use><use xlink:href="#E6-MJMAIN-4E" x="1445" y="0"></use></g><g transform="translate(0,498)"><use transform="scale(0.707)" xlink:href="#E6-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-66.69665247600142,0) scale(6.598888557919511,1)"><use transform="scale(0.707)" xlink:href="#E6-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E6-MJMAIN-AF" x="2674" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{DEN}}</script>接8286使能，控制数据使能；NMI<mark>上升沿</mark>响应；INTR高电平响应（IF=1时）；RESET清零FLAGS IP DS SS ES和指令队列，CS置FFFF；READY表示储存器或IO准备好；CLK占空比1:3，时钟信号可以来自8284A.</p></li><li><p>8086的基本总线周期</p><ul><li>T1地址周期，T2缓冲周期，T3数据周期，T4结束周期。</li><li>8086在<mark>T3前沿</mark>检测READY，如果是低电平则插入Tw，Tw内各输出引脚保持T3状态；此后<mark>每个Tw前沿</mark>检测READY.</li><li>读出数据时间为N个时钟周期，则在T3和T4之间插入N-1个Tw.</li></ul></li><li><p>最小模式读内存时序</p><p><img src='img/bustiming_readmem.png' alt='Bus Timing: Read Memory' referrerPolicy='no-referrer' /></p></li><li><p>最小模式写内存时序</p><p><img src='img/bustiming_writemem.png' alt='Bus Timing: Write Memory' referrerPolicy='no-referrer' /></p></li><li><p>8086内存的FFFF0~FFFFF放了系统复位代码，00000~003FF共<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.484ex" height="2.024ex" viewBox="0 -745.4 3222.4 871.3" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E7-MJMAIN-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path stroke-width="0" id="E7-MJMAIN-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path stroke-width="0" id="E7-MJMAIN-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path stroke-width="0" id="E7-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E7-MJMAIN-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E7-MJMAIN-32"></use><use xlink:href="#E7-MJMAIN-35" x="500" y="0"></use><use xlink:href="#E7-MJMAIN-36" x="1000" y="0"></use><use xlink:href="#E7-MJMAIN-D7" x="1722" y="0"></use><use xlink:href="#E7-MJMAIN-34" x="2722" y="0"></use></g></svg></span><script type="math/tex">256\times4</script>Bytes的空间存放了256个中断向量，低字放IP，高字放CS.</p></li><li><p>8086的IO空间是0000~FFFF共64K个端口。</p></li></ul><h3><a name='header-n53' class='md-header-anchor '></a>指令系统与汇编语言</h3><ul><li><p>偏移地址又称有效地址EA，段基址和偏移地址统称逻辑地址。</p></li><li><p>储存器寻址</p><ul><li>直接寻址默认在数据段 <code>[20E9H]</code> ；段超越前缀 <code>ES:[20E9H]</code>。</li><li>寄存器间接寻址<code>BX</code>、<code>SI</code>、<code>DI</code>默认在数据段；<mark><code>BP</code>默认在堆栈段</mark>。</li><li>寄存器相对寻址 <code>20E9H[SI]</code> 或 <code>[SI+20E9H]</code>，默认段寄存器与上面一样。</li><li>基址变址寻址 <code>[BX][SI]</code> 或 <code>[BX+SI]</code>，必须一个基址寄存器+一个变址寄存器，<code>BP</code>默认堆栈段，<code>BX</code>默认数据段。</li><li>相对基址变址类似。</li></ul></li><li><p>IO寻址</p><ul><li>00~FF的地址可以由立即数给出；<mark>0000~FFFF的地址只能由<code>DX</code>给出</mark>。</li></ul></li><li><p>转移寻址</p><ul><li><code>JMP 20E9:2018</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> <code>(CS)=20E9H</code> <code>(IP)=2018H</code>.</li><li><code>JMP F</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> <code>(IP)=000FH</code>.</li><li><code>JMP SHORT label</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> 8bits disp.</li><li><code>JMP NEAR PTR label</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> 16bits disp.</li><li><code>JMP FAR PTR label</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> 段间转移。</li><li><code>JMP AX</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> <code>(IP)=(AX)</code>.</li><li><code>JMP WORD PTR [BX]</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> <code>(IP)=[BX]</code>.</li><li><code>JMP DWORD PTR [BX]</code> <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script> <code>(CS)=[BX+2]</code> <code>(IP)=[BX]</code>.</li><li>对于无符号数用<code>JB</code> <code>JNB</code> <code>JNA</code> <code>JA</code> 系列（above、below）；对于有符号数用<code>JL</code> <code>JNL</code> <code>JNG</code> <code>JG</code> 系列（less、greater）。</li><li><mark>所有的条件转移指令都是段内直接短转移</mark>（8bits disp）。</li><li><code>LOOP</code> <code>LOOPZ</code> <code>LOOPNZ</code> <mark>所有的循环控制转移都是短转移</mark>（8bits disp）。</li><li><code>CALL label</code> <code>CALL [BX]</code> <mark>段内直接调用和间接调用都是近调用</mark>（16bits disp）。</li><li><code>CALL FAR PTR label</code> <code>CALL DWORD PTR [BX]</code> 段间直接调用和间接调用都是远调用。</li><li>中断调用是远调用。</li><li><code>RET</code> <code>IRET</code> RET不恢复标志位（CALL不压FLAGS）；IRET都是远转移，且恢复标志位（INT将FLAGS压栈）。</li></ul></li><li><p><code>MOV</code> <mark>DST不能是CS；DST和SRC不能同时为段寄存器；立即数不能直接传入段寄存器</mark>。</p></li><li><p><code>XCHG</code> 不可以用段寄存器。</p></li><li><p><code>XLAT</code> 隐式用AL和BX：<code>(AL)=DS:[BX+AL]</code>.</p></li><li><p><code>PUSH</code> 和 <code>POP</code> <mark>都是字操作，不可以用字节</mark>；<code>POP</code> 不可以到CS。</p></li><li><p><code>INC</code> 和 <code>DEC</code> 影响除了CF外的标志位。</p></li><li><p><code>CMP OP1, OP2</code> 按照OP1-OP2的结果设置标志位。</p></li><li><p><code>MUL OP</code> <code>IMUL OP</code> 将OP乘到AX或AL上，结果放在(DX,AX)或AX中；若乘积的高半部分存了有意义的数字，则OF=CF=1.</p></li><li><p><code>DIV OP</code> <code>IDIV OP</code> 对于字节除法AX/OP，AL存商，AH存余数；对于字除法(DX,AX)/OP，AX存商，DX存余数；<mark>余数的符号与被除数的符号相同</mark>；标志位无定义。</p></li><li><p><code>CBW</code> <code>CWD</code> 根据AL或AX的最高位扩展到AH和DX，使作为被除数。</p></li><li><p><code>TEST OP1, OP2</code> 按照 <code>AND OP1, OP2</code>的结果设置标志位，影响SF、ZF、PF.</p></li><li><p><code>SHL</code> <code>SHR</code> <code>SAL</code> <code>SAR</code> SHL和SAL是一样的，低位补零，高位进CF；SHR高位补零，低位进CF；<mark>SAR高位不变</mark>，低位进CF. 如果移位大于1位，需要用CL存位数。</p></li><li><p><code>ROL</code> <code>ROR</code> <code>RCL</code> <code>RCR</code> ROL和ROR循环的位同时被复制到CF；RCL和RCR高位或低位进CF，原CF进入循环。</p></li><li><p><code>MOVSB</code> <code>MOVSW</code> <code>STOSB</code> <code>STOSW</code> <code>LODSB</code> <code>LODSW</code> 源串在数据段，目的串在附加段；STOS和LODS都隐含使用AL或AX寄存器。</p></li><li><p><code>CMPSB</code> <code>CMPSW</code> <code>SCASB</code> <code>SCASW</code> SMPS比较源串和目的串当前字或字节；SCAS比较AL或AX与目的串当前字或字节。</p></li><li><p><code>REP</code> <code>REPZ</code> <code>REPNZ</code> 加在串指令前的循环操作前缀，计数器CX.</p></li><li><p><code>LOCK</code> 总线封锁前缀，使这条指令执行完之前<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.857ex" height="2.887ex" viewBox="0 -1117.1 2952.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E16-MJMAIN-4C" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q48 680 182 680Q324 680 348 683H360V637H333Q273 637 258 635T233 622L232 342V129Q232 57 237 52Q243 47 313 47Q384 47 410 53Q470 70 498 110T536 221Q536 226 537 238T540 261T542 272T562 273H582V268Q580 265 568 137T554 5V0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E16-MJMAIN-4F" d="M56 340Q56 423 86 494T164 610T270 680T388 705Q521 705 621 601T722 341Q722 260 693 191T617 75T510 4T388 -22T267 3T160 74T85 189T56 340ZM467 647Q426 665 388 665Q360 665 331 654T269 620T213 549T179 439Q174 411 174 354Q174 144 277 61Q327 20 385 20H389H391Q474 20 537 99Q603 188 603 354Q603 411 598 439Q577 592 467 647Z"></path><path stroke-width="0" id="E16-MJMAIN-43" d="M56 342Q56 428 89 500T174 615T283 681T391 705Q394 705 400 705T408 704Q499 704 569 636L582 624L612 663Q639 700 643 704Q644 704 647 704T653 705H657Q660 705 666 699V419L660 413H626Q620 419 619 430Q610 512 571 572T476 651Q457 658 426 658Q322 658 252 588Q173 509 173 342Q173 221 211 151Q232 111 263 84T328 45T384 29T428 24Q517 24 571 93T626 244Q626 251 632 257H660L666 251V236Q661 133 590 56T403 -21Q262 -21 159 83T56 342Z"></path><path stroke-width="0" id="E16-MJMAIN-4B" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H313Q235 637 233 620Q232 618 232 462L233 307L379 449Q425 494 479 546Q518 584 524 591T531 607V608Q531 630 503 636Q501 636 498 636T493 637H489V683H499Q517 680 630 680Q704 680 716 683H722V637H708Q633 633 589 597Q584 592 495 506T406 419T515 254T631 80Q644 60 662 54T715 46H736V0H728Q719 3 615 3Q493 3 472 0H461V46H469Q515 46 515 72Q515 78 512 84L336 351Q332 348 278 296L232 251V156Q232 62 235 58Q243 47 302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E16-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E16-MJMAIN-4C"></use><use xlink:href="#E16-MJMAIN-4F" x="625" y="0"></use><use xlink:href="#E16-MJMAIN-43" x="1403" y="0"></use><use xlink:href="#E16-MJMAIN-4B" x="2125" y="0"></use></g><g transform="translate(0,520)"><use transform="scale(0.707)" xlink:href="#E16-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-202.02075219899314,0) scale(9.372470835371454,1)"><use transform="scale(0.707)" xlink:href="#E16-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E16-MJMAIN-AF" x="3675" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{LOCK}}</script>引脚为低电平。</p></li><li><p><code>INT</code></p><ul><li><mark>功能号放在AH里面</mark>。</li><li>05~1F是BIOS中断调用；20~3F是DOS中断调用。</li><li>AH=02H，INT 21H：将DL中的字符送标准输出流。</li><li>AH=01H，INT 21H：键盘输入字符存入AL中。</li><li>DL=0FFH，AH=06H，INT 21H：不等待键盘输入，如果无输入，ZF=1；如果有输入，ZF=0，字符存AL.</li><li>AH=09H，INT 21H：将DX（偏移地址）指向的字符串输出到console，以&#39;$&#39;结束。</li><li>AH=0AH，INT 21H：读入字符串，以回车结束，存入DX指向的buffer，[DX]预存了最大串长，[DX+1]将存入实际串长，字符串从DX+2开始存。</li><li>AH=4CH，INT 21H：返回DOS系统。</li></ul></li></ul><h3><a name='header-n159' class='md-header-anchor '></a>储存器编制</h3><ul><li><p>存储容量：基本单元数(芯片字数) <span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.807ex" height="1.448ex" viewBox="0 -559.6 778 623.5" role="img" focusable="false" style="vertical-align: 0.021ex; margin-bottom: -0.169ex;"><defs><path stroke-width="0" id="E17-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E17-MJMAIN-D7" x="0" y="0"></use></g></svg></span><script type="math/tex">\times</script> (位数/芯片字)</p></li><li><p>存取速度</p><ul><li>存取时间：从CPU给出有效的地址到存储区读写操作完成需要的时间。</li><li>存取周期：两次访问的最小时间间隔，略大于存取时间。</li></ul></li><li><p>两个储存器层次</p><ul><li>Cache-主存：为提高CPU访问主存的速度，由专门硬件（Cache控制器）实现，对程序完全透明。</li><li>主存-辅存：为弥补主存容量不足，还可以构成“虚拟存储去”，需要操作系统和MMU的支持。</li></ul></li><li><p>半导体存储器分类</p><ul><li>TTL双极性，MOS单极型。</li><li>RAM，ROM.</li><li>易失性与非易失性。</li></ul></li><li><p>单地址译码——线性储存块；双地址译码——储存矩阵。</p></li><li><p>2114是<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.969ex" height="2.024ex" viewBox="0 -807.4 3000.4 871.3" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E18-MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path stroke-width="0" id="E18-MJMAIN-4B" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H313Q235 637 233 620Q232 618 232 462L233 307L379 449Q425 494 479 546Q518 584 524 591T531 607V608Q531 630 503 636Q501 636 498 636T493 637H489V683H499Q517 680 630 680Q704 680 716 683H722V637H708Q633 633 589 597Q584 592 495 506T406 419T515 254T631 80Q644 60 662 54T715 46H736V0H728Q719 3 615 3Q493 3 472 0H461V46H469Q515 46 515 72Q515 78 512 84L336 351Q332 348 278 296L232 251V156Q232 62 235 58Q243 47 302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E18-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E18-MJMAIN-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E18-MJMAIN-31" x="0" y="0"></use><use xlink:href="#E18-MJMAIN-4B" x="500" y="0"></use><use xlink:href="#E18-MJMAIN-D7" x="1500" y="0"></use><use xlink:href="#E18-MJMAIN-34" x="2500" y="0"></use></g></svg></span><script type="math/tex">1\text K\times4</script>bits的SRAM，6264是<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.969ex" height="2.168ex" viewBox="0 -807.4 3000.4 933.3" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E19-MJMAIN-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path stroke-width="0" id="E19-MJMAIN-4B" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H313Q235 637 233 620Q232 618 232 462L233 307L379 449Q425 494 479 546Q518 584 524 591T531 607V608Q531 630 503 636Q501 636 498 636T493 637H489V683H499Q517 680 630 680Q704 680 716 683H722V637H708Q633 633 589 597Q584 592 495 506T406 419T515 254T631 80Q644 60 662 54T715 46H736V0H728Q719 3 615 3Q493 3 472 0H461V46H469Q515 46 515 72Q515 78 512 84L336 351Q332 348 278 296L232 251V156Q232 62 235 58Q243 47 302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E19-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E19-MJMAIN-38" x="0" y="0"></use><use xlink:href="#E19-MJMAIN-4B" x="500" y="0"></use><use xlink:href="#E19-MJMAIN-D7" x="1500" y="0"></use><use xlink:href="#E19-MJMAIN-38" x="2500" y="0"></use></g></svg></span><script type="math/tex">8\text K\times8</script>bits的SRAM. 每个SRAM单元由6个MOS管储存1bit信息。速度快，功耗大，成本高。</p></li><li><p>2164A是<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.13ex" height="2.168ex" viewBox="0 -807.4 3500.4 933.3" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E20-MJMAIN-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path stroke-width="0" id="E20-MJMAIN-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path stroke-width="0" id="E20-MJMAIN-4B" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H313Q235 637 233 620Q232 618 232 462L233 307L379 449Q425 494 479 546Q518 584 524 591T531 607V608Q531 630 503 636Q501 636 498 636T493 637H489V683H499Q517 680 630 680Q704 680 716 683H722V637H708Q633 633 589 597Q584 592 495 506T406 419T515 254T631 80Q644 60 662 54T715 46H736V0H728Q719 3 615 3Q493 3 472 0H461V46H469Q515 46 515 72Q515 78 512 84L336 351Q332 348 278 296L232 251V156Q232 62 235 58Q243 47 302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E20-MJMAIN-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path stroke-width="0" id="E20-MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E20-MJMAIN-36"></use><use xlink:href="#E20-MJMAIN-34" x="500" y="0"></use><use xlink:href="#E20-MJMAIN-4B" x="1000" y="0"></use><use xlink:href="#E20-MJMAIN-D7" x="2000" y="0"></use><use xlink:href="#E20-MJMAIN-31" x="3000" y="0"></use></g></svg></span><script type="math/tex">64\text K\times1</script>bits的DRAM. 每个DRAM单元由一个MOS管和电容储存1bit信息，由于电荷泄露，需要定期刷新。有8个地址引脚，需要先给行地址，再给列地址。</p></li><li><p><mark>DRAM刷新按行进行</mark>。</p></li><li><p>DRAM集成度高，功耗低，需要DRAM控制电路。</p></li><li><p>74LS138是3-8译码器，74LS139是双2-4译码器。<mark>3-8译码器的ABC依次对于低位到高位</mark>。</p></li><li><p>片选方法</p><ul><li>全译码：所有高位地址线都要参与译码，每个储存单元的地址是唯一的。</li><li>部分译码：有些高位地址不参与译码（悬空），存在地址重叠现象。</li><li>线选法：直接用地址线选通<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.083ex" height="2.887ex" viewBox="0 -1117.1 1327.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E21-MJMAIN-43" d="M56 342Q56 428 89 500T174 615T283 681T391 705Q394 705 400 705T408 704Q499 704 569 636L582 624L612 663Q639 700 643 704Q644 704 647 704T653 705H657Q660 705 666 699V419L660 413H626Q620 419 619 430Q610 512 571 572T476 651Q457 658 426 658Q322 658 252 588Q173 509 173 342Q173 221 211 151Q232 111 263 84T328 45T384 29T428 24Q517 24 571 93T626 244Q626 251 632 257H660L666 251V236Q661 133 590 56T403 -21Q262 -21 159 83T56 342Z"></path><path stroke-width="0" id="E21-MJMAIN-53" d="M55 507Q55 590 112 647T243 704H257Q342 704 405 641L426 672Q431 679 436 687T446 700L449 704Q450 704 453 704T459 705H463Q466 705 472 699V462L466 456H448Q437 456 435 459T430 479Q413 605 329 646Q292 662 254 662Q201 662 168 626T135 542Q135 508 152 480T200 435Q210 431 286 412T370 389Q427 367 463 314T500 191Q500 110 448 45T301 -21Q245 -21 201 -4T140 27L122 41Q118 36 107 21T87 -7T78 -21Q76 -22 68 -22H64Q61 -22 55 -16V101Q55 220 56 222Q58 227 76 227H89Q95 221 95 214Q95 182 105 151T139 90T205 42T305 24Q352 24 386 62T420 155Q420 198 398 233T340 281Q284 295 266 300Q261 301 239 306T206 314T174 325T141 343T112 367T85 402Q55 451 55 507Z"></path><path stroke-width="0" id="E21-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E21-MJMAIN-43"></use><use xlink:href="#E21-MJMAIN-53" x="722" y="0"></use></g><g transform="translate(0,520)"><use transform="scale(0.707)" xlink:href="#E21-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(108.5748156680429,0) scale(3.006551060146303,1)"><use transform="scale(0.707)" xlink:href="#E21-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E21-MJMAIN-AF" x="1377" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{CS}}</script>. 存在地址不连续的现象。</li><li>分奇体和偶体时，用A0（低有效）选择偶体，用<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.083ex" height="2.743ex" viewBox="0 -1117.1 2188.5 1181.1" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E22-MJMAIN-42" d="M131 622Q124 629 120 631T104 634T61 637H28V683H229H267H346Q423 683 459 678T531 651Q574 627 599 590T624 512Q624 461 583 419T476 360L466 357Q539 348 595 302T651 187Q651 119 600 67T469 3Q456 1 242 0H28V46H61Q103 47 112 49T131 61V622ZM511 513Q511 560 485 594T416 636Q415 636 403 636T371 636T333 637Q266 637 251 636T232 628Q229 624 229 499V374H312L396 375L406 377Q410 378 417 380T442 393T474 417T499 456T511 513ZM537 188Q537 239 509 282T430 336L329 337H229V200V116Q229 57 234 52Q240 47 334 47H383Q425 47 443 53Q486 67 511 104T537 188Z"></path><path stroke-width="0" id="E22-MJMAIN-48" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 500V378H517V622Q510 629 506 631T490 634T447 637H414V683H425Q446 680 569 680Q704 680 713 683H724V637H691Q651 636 640 634T622 622V61Q628 51 639 49T691 46H724V0H713Q692 3 569 3Q434 3 425 0H414V46H447Q489 47 498 49T517 61V332H232V197L233 61Q239 51 250 49T302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E22-MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path><path stroke-width="0" id="E22-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E22-MJMAIN-42"></use><use xlink:href="#E22-MJMAIN-48" x="708" y="0"></use><use xlink:href="#E22-MJMAIN-45" x="1458" y="0"></use></g><g transform="translate(0,498)"><use transform="scale(0.707)" xlink:href="#E22-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-55.99305136796818,0) scale(6.379509168742521,1)"><use transform="scale(0.707)" xlink:href="#E22-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E22-MJMAIN-AF" x="2595" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{BHE}}</script>选择奇体。</li></ul></li><li><p>Cache的映像方式：直接映像、全相联映像、组相联映像。</p></li></ul><h3><a name='header-n211' class='md-header-anchor '></a>IO与中断</h3><ul><li><p>IO接口电路必须”<mark>输入要三态、输出要锁存</mark>“。还要对信号的速度、电平、形式、格式进行匹配。还可以提供外设的状态信号和中断控制逻辑。需要进行地址译码。提供可编程功能。</p></li><li><p>IO接口交换三种信息：数据信息、状态信息、控制信息。</p></li><li><p>编址方式有独立编址和统一编址两种，各有优劣，8086采用内存IO独立编址。</p></li><li><p>PC机使用低10位地址寻址IO端口，地址范围0000~03FF. 高位地址产生片选信号，低位地址选择片内端口。</p></li><li><p>CPU与外设间数据传送方式</p><ul><li>程序直接控制传送方式：无条件传送、程序查询传送。</li><li>中断控制传送方式。</li><li>DMA控制传送方式，需要DMAC支持。</li></ul></li><li><p>中断源：能发出中断申请的<mark>事件</mark>称为中断源，处理器内中断源引发的中断称为内中断，处理器外引发的中断称为外中断。</p></li><li><p>中断过程：中断请求、中断源识别、中断响应、断点保护、现场保护、中断服务、现场恢复、中断返回。</p></li><li><p>中断判优（仲裁）：软件查询方式、简单硬件方式（菊花链）、专用控制芯片。</p></li><li><p>非屏蔽中断是外部中断，中断类型码是02H；可屏蔽中断类型码08H~0FH.</p></li><li><p><mark>除了单步中断（01H）外，所有的内部中断都无法禁止</mark>，因此软中断不能通过清零IF标志位来禁止。</p></li><li><p>8086的中断响应优先级（从高到低）</p><ul><li><p>内部中断</p><ul><li>除法错（00H）</li><li>INT n</li><li>INTO 溢出中断（04H）</li><li>断点中断（03H）</li></ul></li><li><p><mark>NMI</mark>（02H）</p></li><li><p>INTR 可屏蔽请求</p></li><li><p>单步中断（01H）</p></li></ul><p>实际上在响应内部中断并保护断点之后，还要检测是否是NMI、是否是单步中断，因此<mark>执行中断服务程序的优先级是NMI和单步中断更高</mark>。</p></li><li><p>内部硬中断和NMI由硬件电路产生中断类型码，软中断由指令机器码产生中断类型码，<mark>可屏蔽中断由8259在收到第二个<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.114ex" height="2.743ex" viewBox="0 -1117.1 2632.5 1181.1" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E23-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E23-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E23-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E23-MJMAIN-41" d="M255 0Q240 3 140 3Q48 3 39 0H32V46H47Q119 49 139 88Q140 91 192 245T295 553T348 708Q351 716 366 716H376Q396 715 400 709Q402 707 508 390L617 67Q624 54 636 51T687 46H717V0H708Q699 3 581 3Q458 3 437 0H427V46H440Q510 46 510 64Q510 66 486 138L462 209H229L209 150Q189 91 189 85Q189 72 209 59T259 46H264V0H255ZM447 255L345 557L244 256Q244 255 345 255H447Z"></path><path stroke-width="0" id="E23-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E23-MJMAIN-49"></use><use xlink:href="#E23-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E23-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E23-MJMAIN-41" x="1833" y="0"></use></g><g transform="translate(0,531)"><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-140.85731729594602,0) scale(8.118874325788655,1)"><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF" x="3222" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{INTA}}</script>有效后</mark>将中断类型码发送到数据总线上。</p></li><li><p>启动时，BIOS和操作系统将非用户中断服务程序的入口地址填入中断向量表。用户定制的中断服务随后装入。</p></li><li><p>保护断点：FLAGS入栈；TF进暂存器；清TF、IF；CS入栈，IP入栈；查表，更新CS、IP。判断是否由NMI，有的话重新执行保护断点（<mark>注意这时暂存器也被清零</mark>）；判断是否暂存器为1，是的话重新执行保护断点。</p></li><li><p>用户中断服务程序的编制</p><ul><li><p>保存当前中断类型码n的服务程序</p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="assembly"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="assembly"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.0476px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 26px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -25.9965px; width: 26px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 17px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">MOV</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-keyword">AL</span>, n</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 17px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">MOV</span> <span class="cm-keyword">AH</span>, 35H</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 17px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">INT</span> <span class="cm-keyword">21H</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 56px;"></div><div class="CodeMirror-gutters" style="height: 56px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 25px;"></div></div></div></div></pre><p>于是n的初始服务程序<mark>段基址放在ES中，偏移地址放在BX中</mark>。可以将这两个地址保存到内存里，回头再调回来。</p></li><li><p>关中断 <code>CLI</code>.</p></li><li><p>填入新的中断类型码n的服务程序，假设我们编写的服务程序标号为LABEL. 我们先将其<mark>段基址放进DS，偏移地址放进DX</mark>.</p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="assembly"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="assembly"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.0476px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 26px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -25.9965px; width: 26px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 17px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">MOV</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-keyword">AL</span>, n</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 17px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">MOV</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-keyword">AH</span>, 25H</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 17px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">INT</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-keyword">21H</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 56px;"></div><div class="CodeMirror-gutters" style="height: 56px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 25px;"></div></div></div></div></pre><p>就把(DS,DX)填入了n对应的中断向量表单元。</p></li><li><p>开中断 <code>STI</code>.</p></li><li><p>在我们编写的服务子程序中，注意保护完现场后要开中断，即允许中断嵌套。恢复现场前要关中断。然后执行</p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="assembly"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="assembly"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.0476px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 26px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>2</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -25.9965px; width: 26px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 17px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">MOV</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-keyword">AL</span>, 20H</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -25.9965px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 17px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">OUT</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-keyword">20H</span>, AL</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 37px;"></div><div class="CodeMirror-gutters" style="height: 37px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 25px;"></div></div></div></div></pre><p>向8259的控制端口写EOI控制字。最后开中断，用IRET返回。</p></li><li><p><mark>最后我们用之前保存在内存中的初始服务程序地址恢复中断向量表</mark>。</p></li></ul></li></ul><h3><a name='header-n288' class='md-header-anchor '></a>可编程IO接口芯片</h3><h4><a name='header-n289' class='md-header-anchor '></a>8259A 中断控制器</h4><ul><li><p>8路IRQ，级联最多可到64路。8位数据总线。</p></li><li><p>A0用于选择寄存器。</p></li><li><p><mark>IMR中断屏蔽寄存器，ISR当前服务寄存器</mark>，PR中断优先级裁决器，IRR中断请求寄存器。</p></li><li><p>工作方式</p><ul><li><p>中断触发</p><ul><li>边沿触发：IRQ的上升沿作为触发，高电平至少保持到第一个<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.114ex" height="2.743ex" viewBox="0 -1117.1 2632.5 1181.1" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E23-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E23-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E23-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E23-MJMAIN-41" d="M255 0Q240 3 140 3Q48 3 39 0H32V46H47Q119 49 139 88Q140 91 192 245T295 553T348 708Q351 716 366 716H376Q396 715 400 709Q402 707 508 390L617 67Q624 54 636 51T687 46H717V0H708Q699 3 581 3Q458 3 437 0H427V46H440Q510 46 510 64Q510 66 486 138L462 209H229L209 150Q189 91 189 85Q189 72 209 59T259 46H264V0H255ZM447 255L345 557L244 256Q244 255 345 255H447Z"></path><path stroke-width="0" id="E23-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E23-MJMAIN-49"></use><use xlink:href="#E23-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E23-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E23-MJMAIN-41" x="1833" y="0"></use></g><g transform="translate(0,531)"><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-140.85731729594602,0) scale(8.118874325788655,1)"><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF" x="3222" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{INTA}}</script>负脉冲之前。80x86采用这种方式。</li><li>电平触发：IRQ的高电平作为触发，应及时撤销高电平。</li></ul></li><li><p>中断嵌套</p><ul><li>一般全嵌套：只允许高优先级中断低优先级，禁止同级。</li><li>特殊全嵌套：还允许同级。</li></ul></li><li><p>优先级</p><ul><li>固定优先级：IRQ0最高，IRQ7最低，是默认的方式。</li><li>优先级自动循环：一个服务完了优先级自动将为最低，其它的服务优先级依次上升，相当于等优先级。</li><li>优先级特殊循环：规定一个初始IRQ<sub>n</sub>优先队列，再循环。</li></ul></li><li><p>中断屏蔽</p><ul><li>普通屏蔽：将IMR中相应位置置1.</li><li>特殊屏蔽：中断服务程序中，该中断对应的ISR被清零，IMR置位，此时所有其它中断都可以被响应，不论优先级。</li></ul></li><li><p>中断结束</p><ul><li>普通中断结束：中断服务结束前，CPU向8259发送EOI命令字，清除ISR中优先级最高的置位。</li><li>自动中断结束：第二个<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.114ex" height="2.743ex" viewBox="0 -1117.1 2632.5 1181.1" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E23-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E23-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E23-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E23-MJMAIN-41" d="M255 0Q240 3 140 3Q48 3 39 0H32V46H47Q119 49 139 88Q140 91 192 245T295 553T348 708Q351 716 366 716H376Q396 715 400 709Q402 707 508 390L617 67Q624 54 636 51T687 46H717V0H708Q699 3 581 3Q458 3 437 0H427V46H440Q510 46 510 64Q510 66 486 138L462 209H229L209 150Q189 91 189 85Q189 72 209 59T259 46H264V0H255ZM447 255L345 557L244 256Q244 255 345 255H447Z"></path><path stroke-width="0" id="E23-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E23-MJMAIN-49"></use><use xlink:href="#E23-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E23-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E23-MJMAIN-41" x="1833" y="0"></use></g><g transform="translate(0,531)"><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-140.85731729594602,0) scale(8.118874325788655,1)"><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E23-MJMAIN-AF" x="3222" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{INTA}}</script>后自动EOI.</li><li>特殊中断结束：特殊屏蔽方式中，CPU发特殊命令字，指明哪一位ISR被复位。</li></ul></li></ul></li><li><p>初始化按照ICW<sub>1</sub>到ICW<sub>4</sub>的顺序，<mark>其中ICW<sub>2</sub>指定8259A的中断类型码的高五位，一般是08H</mark>，低3位自动填入。</p></li></ul><h4><a name='header-n372' class='md-header-anchor '></a>8255A 并行接口芯片</h4><ul><li><p>ABC3路，每路8位。分为A组和B组。A组包括PA<sub>7</sub>-PA<sub>0</sub>和PC<sub>7</sub>-PC<sub>4</sub>；B组包括PB<sub>7</sub>-PA<sub>0</sub>和PC<sub>3</sub>-PC<sub>0</sub>.</p></li><li><p>8位数据总线，A0和A1选择片内端口。</p></li><li><p>工作方式</p><ul><li><p>方式0：ABC口都可以设置，基本输入输出，单向，输出锁存，输入三态缓冲无锁存。适用于无条件数据传输。</p></li><li><p>方式1：AB口都可以设置，利用C口的某些位（AB口各分3位）作为应答联络线，单向，输入输出都有锁存，C口剩余位还可以作为方式0使用。适用于中断、查询方式传输。</p><ul><li>方式1输入：应答联络线包括<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.728ex" height="2.887ex" viewBox="0 -1117.1 2035.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E47-MJMAIN-53" d="M55 507Q55 590 112 647T243 704H257Q342 704 405 641L426 672Q431 679 436 687T446 700L449 704Q450 704 453 704T459 705H463Q466 705 472 699V462L466 456H448Q437 456 435 459T430 479Q413 605 329 646Q292 662 254 662Q201 662 168 626T135 542Q135 508 152 480T200 435Q210 431 286 412T370 389Q427 367 463 314T500 191Q500 110 448 45T301 -21Q245 -21 201 -4T140 27L122 41Q118 36 107 21T87 -7T78 -21Q76 -22 68 -22H64Q61 -22 55 -16V101Q55 220 56 222Q58 227 76 227H89Q95 221 95 214Q95 182 105 151T139 90T205 42T305 24Q352 24 386 62T420 155Q420 198 398 233T340 281Q284 295 266 300Q261 301 239 306T206 314T174 325T141 343T112 367T85 402Q55 451 55 507Z"></path><path stroke-width="0" id="E47-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E47-MJMAIN-42" d="M131 622Q124 629 120 631T104 634T61 637H28V683H229H267H346Q423 683 459 678T531 651Q574 627 599 590T624 512Q624 461 583 419T476 360L466 357Q539 348 595 302T651 187Q651 119 600 67T469 3Q456 1 242 0H28V46H61Q103 47 112 49T131 61V622ZM511 513Q511 560 485 594T416 636Q415 636 403 636T371 636T333 637Q266 637 251 636T232 628Q229 624 229 499V374H312L396 375L406 377Q410 378 417 380T442 393T474 417T499 456T511 513ZM537 188Q537 239 509 282T430 336L329 337H229V200V116Q229 57 234 52Q240 47 334 47H383Q425 47 443 53Q486 67 511 104T537 188Z"></path><path stroke-width="0" id="E47-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E47-MJMAIN-53"></use><use xlink:href="#E47-MJMAIN-54" x="556" y="0"></use><use xlink:href="#E47-MJMAIN-42" x="1278" y="0"></use></g><g transform="translate(0,520)"><use transform="scale(0.707)" xlink:href="#E47-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-26.74928405494876,0) scale(5.7801333375982455,1)"><use transform="scale(0.707)" xlink:href="#E47-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E47-MJMAIN-AF" x="2378" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{STB}}</script>外设准备好、<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.999ex" height="2.024ex" viewBox="0 -807.4 1722 871.3" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E57-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E57-MJMAIN-42" d="M131 622Q124 629 120 631T104 634T61 637H28V683H229H267H346Q423 683 459 678T531 651Q574 627 599 590T624 512Q624 461 583 419T476 360L466 357Q539 348 595 302T651 187Q651 119 600 67T469 3Q456 1 242 0H28V46H61Q103 47 112 49T131 61V622ZM511 513Q511 560 485 594T416 636Q415 636 403 636T371 636T333 637Q266 637 251 636T232 628Q229 624 229 499V374H312L396 375L406 377Q410 378 417 380T442 393T474 417T499 456T511 513ZM537 188Q537 239 509 282T430 336L329 337H229V200V116Q229 57 234 52Q240 47 334 47H383Q425 47 443 53Q486 67 511 104T537 188Z"></path><path stroke-width="0" id="E57-MJMAIN-46" d="M128 619Q121 626 117 628T101 631T58 634H25V680H582V676Q584 670 596 560T610 444V440H570V444Q563 493 561 501Q555 538 543 563T516 601T477 622T431 631T374 633H334H286Q252 633 244 631T233 621Q232 619 232 490V363H284Q287 363 303 363T327 364T349 367T372 373T389 385Q407 403 410 459V480H450V200H410V221Q407 276 389 296Q381 303 371 307T348 313T327 316T303 317T284 317H232V189L233 61Q240 54 245 52T270 48T333 46H360V0H348Q324 3 182 3Q51 3 36 0H25V46H58Q100 47 109 49T128 61V619Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E57-MJMAIN-49"></use><use xlink:href="#E57-MJMAIN-42" x="361" y="0"></use><use xlink:href="#E57-MJMAIN-46" x="1069" y="0"></use></g></svg></span><script type="math/tex">\text{IBF}</script>输入锁存器满、<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.967ex" height="2.168ex" viewBox="0 -807.4 2569 933.3" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E67-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E67-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E67-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E67-MJMAIN-52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E67-MJMAIN-49"></use><use xlink:href="#E67-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E67-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E67-MJMAIN-52" x="1833" y="0"></use></g></svg></span><script type="math/tex">\text{INTR}</script>中断请求和<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.839ex" height="2.024ex" viewBox="0 -807.4 2514 871.3" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E77-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E77-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E77-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E77-MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E77-MJMAIN-49"></use><use xlink:href="#E77-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E77-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E77-MJMAIN-45" x="1833" y="0"></use></g></svg></span><script type="math/tex">\text{INTE}</script>是否允许发出中断请求。</li><li>方式1输出：应答联络线包括<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.083ex" height="2.887ex" viewBox="0 -1117.1 2188.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E85-MJMAIN-4F" d="M56 340Q56 423 86 494T164 610T270 680T388 705Q521 705 621 601T722 341Q722 260 693 191T617 75T510 4T388 -22T267 3T160 74T85 189T56 340ZM467 647Q426 665 388 665Q360 665 331 654T269 620T213 549T179 439Q174 411 174 354Q174 144 277 61Q327 20 385 20H389H391Q474 20 537 99Q603 188 603 354Q603 411 598 439Q577 592 467 647Z"></path><path stroke-width="0" id="E85-MJMAIN-42" d="M131 622Q124 629 120 631T104 634T61 637H28V683H229H267H346Q423 683 459 678T531 651Q574 627 599 590T624 512Q624 461 583 419T476 360L466 357Q539 348 595 302T651 187Q651 119 600 67T469 3Q456 1 242 0H28V46H61Q103 47 112 49T131 61V622ZM511 513Q511 560 485 594T416 636Q415 636 403 636T371 636T333 637Q266 637 251 636T232 628Q229 624 229 499V374H312L396 375L406 377Q410 378 417 380T442 393T474 417T499 456T511 513ZM537 188Q537 239 509 282T430 336L329 337H229V200V116Q229 57 234 52Q240 47 334 47H383Q425 47 443 53Q486 67 511 104T537 188Z"></path><path stroke-width="0" id="E85-MJMAIN-46" d="M128 619Q121 626 117 628T101 631T58 634H25V680H582V676Q584 670 596 560T610 444V440H570V444Q563 493 561 501Q555 538 543 563T516 601T477 622T431 631T374 633H334H286Q252 633 244 631T233 621Q232 619 232 490V363H284Q287 363 303 363T327 364T349 367T372 373T389 385Q407 403 410 459V480H450V200H410V221Q407 276 389 296Q381 303 371 307T348 313T327 316T303 317T284 317H232V189L233 61Q240 54 245 52T270 48T333 46H360V0H348Q324 3 182 3Q51 3 36 0H25V46H58Q100 47 109 49T128 61V619Z"></path><path stroke-width="0" id="E85-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E85-MJMAIN-4F"></use><use xlink:href="#E85-MJMAIN-42" x="778" y="0"></use><use xlink:href="#E85-MJMAIN-46" x="1486" y="0"></use></g><g transform="translate(0,520)"><use transform="scale(0.707)" xlink:href="#E85-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-55.99305136796818,0) scale(6.379509168742521,1)"><use transform="scale(0.707)" xlink:href="#E85-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E85-MJMAIN-AF" x="2595" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{OBF}}</script>输出缓冲器满、<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.341ex" height="2.887ex" viewBox="0 -1117.1 2299.5 1243" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E94-MJMAIN-41" d="M255 0Q240 3 140 3Q48 3 39 0H32V46H47Q119 49 139 88Q140 91 192 245T295 553T348 708Q351 716 366 716H376Q396 715 400 709Q402 707 508 390L617 67Q624 54 636 51T687 46H717V0H708Q699 3 581 3Q458 3 437 0H427V46H440Q510 46 510 64Q510 66 486 138L462 209H229L209 150Q189 91 189 85Q189 72 209 59T259 46H264V0H255ZM447 255L345 557L244 256Q244 255 345 255H447Z"></path><path stroke-width="0" id="E94-MJMAIN-43" d="M56 342Q56 428 89 500T174 615T283 681T391 705Q394 705 400 705T408 704Q499 704 569 636L582 624L612 663Q639 700 643 704Q644 704 647 704T653 705H657Q660 705 666 699V419L660 413H626Q620 419 619 430Q610 512 571 572T476 651Q457 658 426 658Q322 658 252 588Q173 509 173 342Q173 221 211 151Q232 111 263 84T328 45T384 29T428 24Q517 24 571 93T626 244Q626 251 632 257H660L666 251V236Q661 133 590 56T403 -21Q262 -21 159 83T56 342Z"></path><path stroke-width="0" id="E94-MJMAIN-4B" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H313Q235 637 233 620Q232 618 232 462L233 307L379 449Q425 494 479 546Q518 584 524 591T531 607V608Q531 630 503 636Q501 636 498 636T493 637H489V683H499Q517 680 630 680Q704 680 716 683H722V637H708Q633 633 589 597Q584 592 495 506T406 419T515 254T631 80Q644 60 662 54T715 46H736V0H728Q719 3 615 3Q493 3 472 0H461V46H469Q515 46 515 72Q515 78 512 84L336 351Q332 348 278 296L232 251V156Q232 62 235 58Q243 47 302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="0" id="E94-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(24,0)"><use xlink:href="#E94-MJMAIN-41"></use><use xlink:href="#E94-MJMAIN-43" x="750" y="0"></use><use xlink:href="#E94-MJMAIN-4B" x="1472" y="0"></use></g><g transform="translate(0,531)"><use transform="scale(0.707)" xlink:href="#E94-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(-77.20911784996264,0) scale(6.814350458004054,1)"><use transform="scale(0.707)" xlink:href="#E94-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E94-MJMAIN-AF" x="2751" y="0"></use></g></g></svg></span><script type="math/tex">\overline{\text{ACK}}</script>外设响应、<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.967ex" height="2.168ex" viewBox="0 -807.4 2569 933.3" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E67-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E67-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E67-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E67-MJMAIN-52" d="M130 622Q123 629 119 631T103 634T60 637H27V683H202H236H300Q376 683 417 677T500 648Q595 600 609 517Q610 512 610 501Q610 468 594 439T556 392T511 361T472 343L456 338Q459 335 467 332Q497 316 516 298T545 254T559 211T568 155T578 94Q588 46 602 31T640 16H645Q660 16 674 32T692 87Q692 98 696 101T712 105T728 103T732 90Q732 59 716 27T672 -16Q656 -22 630 -22Q481 -16 458 90Q456 101 456 163T449 246Q430 304 373 320L363 322L297 323H231V192L232 61Q238 51 249 49T301 46H334V0H323Q302 3 181 3Q59 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM491 499V509Q491 527 490 539T481 570T462 601T424 623T362 636Q360 636 340 636T304 637H283Q238 637 234 628Q231 624 231 492V360H289Q390 360 434 378T489 456Q491 467 491 499Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E67-MJMAIN-49"></use><use xlink:href="#E67-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E67-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E67-MJMAIN-52" x="1833" y="0"></use></g></svg></span><script type="math/tex">\text{INTR}</script>中断请求和<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.839ex" height="2.024ex" viewBox="0 -807.4 2514 871.3" role="img" focusable="false" style="vertical-align: -0.149ex;"><defs><path stroke-width="0" id="E77-MJMAIN-49" d="M328 0Q307 3 180 3T32 0H21V46H43Q92 46 106 49T126 60Q128 63 128 342Q128 620 126 623Q122 628 118 630T96 635T43 637H21V683H32Q53 680 180 680T328 683H339V637H317Q268 637 254 634T234 623Q232 620 232 342Q232 63 234 60Q238 55 242 53T264 48T317 46H339V0H328Z"></path><path stroke-width="0" id="E77-MJMAIN-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path stroke-width="0" id="E77-MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="0" id="E77-MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E77-MJMAIN-49"></use><use xlink:href="#E77-MJMAIN-4E" x="361" y="0"></use><use xlink:href="#E77-MJMAIN-54" x="1111" y="0"></use><use xlink:href="#E77-MJMAIN-45" x="1833" y="0"></use></g></svg></span><script type="math/tex">\text{INTE}</script>是否允许发出中断请求。</li></ul></li><li><p>方式2：A口可用，半双工，C口部分位（5位）提供应答联络，B口可以工作于方式0或方式1. 适用于中断、查询方式传输。</p></li></ul></li></ul><h4><a name='header-n405' class='md-header-anchor '></a>8253 定时器</h4><ul><li><p>三通道，每通道计数器16位。</p></li><li><p>8位数据总线，A0和A1选择片内端口。</p></li><li><p>每个计数器输入CLK计数和GATE触发，输出OUT. 初值写入初值寄存器，<mark>经过CLK的一个上升沿和一个下降沿后被装入减一计数器</mark>，需要读出时进当前数值锁存器。</p></li><li><p><mark>计数器初值的最大值是0000H</mark>，因为是减一再判零。</p></li><li><p><mark>读出计数器当前值包括一次写两次读</mark>：向控制口写锁存命令，读计数器端口（低八位），读计数器端口（高八位）。</p></li><li><p>工作方式</p><figure><table><thead><tr><th style='text-align:right;' >方式</th><th style='text-align:center;' >触发方式</th><th style='text-align:center;' >装入次数</th><th style='text-align:center;' >GATE</th><th style='text-align:center;' >OUT</th><th style='text-align:center;' >说明</th></tr></thead><tbody><tr><td style='text-align:right;' >方式0</td><td style='text-align:center;' >自动触发</td><td style='text-align:center;' >1次</td><td style='text-align:center;' >1允许，0暂停</td><td style='text-align:center;' >写控制字后0，计数结束后1</td><td style='text-align:center;' ><mark>写入N后经过N+1个CLK周期OUT变高</mark></td></tr><tr><td style='text-align:right;' >方式1</td><td style='text-align:center;' >硬件触发</td><td style='text-align:center;' >多次</td><td style='text-align:center;' >任何时候，GATE上升沿到达后，经过一个CLK上升和下降，初值被装入</td><td style='text-align:center;' >写控制字后1，装入后0，计数结束后1</td><td style='text-align:center;' >OUT负脉冲宽度为N个CLK</td></tr><tr><td style='text-align:right;' >方式2</td><td style='text-align:center;' >自动触发</td><td style='text-align:center;' >多次</td><td style='text-align:center;' >1允许，0暂停，由0变1重新计数</td><td style='text-align:center;' >写控制字后1，计数器为1时0，计数结束1，反复</td><td style='text-align:center;' >1/N分频器，负脉冲宽度1个CLK</td></tr><tr><td style='text-align:right;' >方式3</td><td style='text-align:center;' >自动触发</td><td style='text-align:center;' >多次</td><td style='text-align:center;' >1允许，0暂停，由0变1重新计数</td><td style='text-align:center;' >写控制字后1，<mark>N/2或(N-1)/2时0</mark>，计数结束1，反复</td><td style='text-align:center;' >占空比1:1的1/N分频器，0宽度小于等于1宽度</td></tr><tr><td style='text-align:right;' >方式4</td><td style='text-align:center;' >自动触发</td><td style='text-align:center;' >1次</td><td style='text-align:center;' >1允许，0暂停</td><td style='text-align:center;' >写控制字后1，计数器0时0，之后1</td><td style='text-align:center;' >写入N后<mark>经过N+1个CLK周期</mark>，负脉冲宽度1个CLK</td></tr><tr><td style='text-align:right;' >方式5</td><td style='text-align:center;' >硬件触发</td><td style='text-align:center;' >多次</td><td style='text-align:center;' >任何时候，GATE上升沿到达后，经过一个CLK上升和下降，初值被装入</td><td style='text-align:center;' >写控制字后1，计数器0时0，之后1</td><td style='text-align:center;' >写入N后<mark>经过N+1个CLK周期</mark>，负脉冲宽度1个CLK</td></tr></tbody></table></figure></li></ul><h4><a name='header-n480' class='md-header-anchor '></a>8251 串行通信芯片</h4><ul><li><p>同步：码元同步、字符同步、帧同步。</p><ul><li>异步串行：双方约定时钟频率，数据包按照一定标准编制。</li><li>同步串行：有专门的机制保持收发双方时钟同步。</li></ul></li><li><p>异步串行通信标准</p><ul><li>字符之间空闲位1.</li><li>一个起始位0.</li><li>5~8个数据位，<mark>从低位开始传送</mark>。</li><li>一个校验位，<mark>偶校验是指数据位和校验位一起1的个数为偶数，奇校验是指数据位和校验位一起1的个数为奇数</mark>。</li><li>1/1.5/2个停止位1.</li><li>如果码元宽度是时钟的16倍，则接收方在CLK上升沿采样，连续8个低电平认为是起始位，此后每16个CLK采样，就可以采在码元的中点。</li><li>Buadrate：每秒传输的符号数，等于比特率，时钟频率是波特率的倍数（16、32、64等）。</li></ul></li><li><p>调制解调：DA/AD转换，以正弦波传输，避免传输线效应导致边沿失真。</p></li><li><p>RS232C标准最小连线：TxD1<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script>RxD2，TxD2<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.804ex" height="1.736ex" viewBox="0 -621.5 1638 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E15-MJMAIN-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E15-MJMAIN-27F6" x="0" y="0"></use></g></svg></span><script type="math/tex">\longrightarrow</script>RxD1，SG1<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.318ex" height="1.736ex" viewBox="0 -621.5 1859 747.4" role="img" focusable="false" style="vertical-align: -0.292ex;"><defs><path stroke-width="0" id="E125-MJMAIN-27F7" d="M165 270H1694Q1578 357 1551 493Q1551 494 1551 496T1550 499Q1550 511 1567 511H1570Q1579 511 1582 510T1588 506T1591 497T1594 481T1602 456Q1624 389 1675 336T1794 261Q1803 258 1803 250Q1803 244 1798 241T1774 231T1736 212Q1695 186 1665 152T1620 85T1599 35T1591 4Q1589 -6 1586 -8T1570 -11Q1550 -11 1550 0Q1550 7 1555 25Q1587 151 1694 230H165Q167 228 182 216T211 189T244 152T277 96T303 25Q308 7 308 0Q308 -11 288 -11Q281 -11 278 -11T272 -7T267 2T263 21Q245 94 195 151T73 236Q58 242 55 247Q55 254 59 257T73 264Q121 283 158 314T215 375T247 434T264 480L267 497Q269 503 270 505T275 509T288 511Q308 511 308 500Q308 493 303 475Q293 438 278 406T246 352T215 315T185 287T165 270Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E125-MJMAIN-27F7" x="0" y="0"></use></g></svg></span><script type="math/tex">\longleftrightarrow</script>SG2.</p></li><li><p>8251一路发送一路接收，都有缓冲器。</p></li><li><p>8位数据总线，A0接<span class="MathJax_Preview"></span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.728ex" height="3.463ex" viewBox="0 -1117.1 2035.5 1490.8" role="img" focusable="false" style="vertical-align: -0.868ex;"><defs><path stroke-width="0" id="E157-MJMAIN-43" d="M56 342Q56 428 89 500T174 615T283 681T391 705Q394 705 400 705T408 704Q499 704 569 636L582 624L612 663Q639 700 643 704Q644 704 647 704T653 705H657Q660 705 666 699V419L660 413H626Q620 419 619 430Q610 512 571 572T476 651Q457 658 426 658Q322 658 252 588Q173 509 173 342Q173 221 211 151Q232 111 263 84T328 45T384 29T428 24Q517 24 571 93T626 244Q626 251 632 257H660L666 251V236Q661 133 590 56T403 -21Q262 -21 159 83T56 342Z"></path><path stroke-width="0" id="E157-MJMAIN-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path stroke-width="0" id="E157-MJMAIN-44" d="M130 622Q123 629 119 631T103 634T60 637H27V683H228Q399 682 419 682T461 676Q504 667 546 641T626 573T685 470T708 336Q708 210 634 116T442 3Q429 1 228 0H27V46H60Q102 47 111 49T130 61V622ZM593 338Q593 439 571 501T493 602Q439 637 355 637H322H294Q238 637 234 628Q231 624 231 344Q231 62 232 59Q233 49 248 48T339 46H350Q456 46 515 95Q561 133 577 191T593 338Z"></path><path stroke-width="0" id="E157-MJMAIN-AF" d="M69 544V590H430V544H69Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E157-MJMAIN-43"></use><use xlink:href="#E157-MJMAIN-2F" x="722" y="0"></use><g transform="translate(1222,0)"><use xlink:href="#E157-MJMAIN-44" x="24" y="0"></use><g transform="translate(0,498)"><use transform="scale(0.707)" xlink:href="#E157-MJMAIN-AF" x="-69" y="0"></use><g transform="translate(206.81858298106232,0) scale(0.9929616666289323,1)"><use transform="scale(0.707)" xlink:href="#E157-MJMAIN-AF"></use></g><use transform="scale(0.707)" xlink:href="#E157-MJMAIN-AF" x="650" y="0"></use></g></g></g></svg></span><script type="math/tex">\text{C/}\overline{\text D}</script>选择片内端口。</p></li><li><p>发送数据写入缓冲器后TxRDY有效，接收数据写入缓冲器后RxRDY有效。</p></li><li><p>初始化约定：<mark>先向控制口写3个0，再写一个40H</mark>，执行软复位；<mark>然后写方式字，再写命令字</mark>。</p></li></ul><h4><a name='header-n548' class='md-header-anchor '></a>8237A DMA控制器</h4><ul><li><p>DMA操作</p><ul><li>DMAC接受外设的DMA请求。</li><li>DMAC向CPU发出总线请求。</li><li><mark>CPU发出总线响应后，DMAC接管总线，在地址总线上发出地址寄存器中的地址，并向外设发送DMA应答</mark>。</li><li>DMAC给出IO和存储器的控制信号，在传输过程中对字节数计数。</li><li>交权。</li></ul></li><li><p>4通道，可级联。</p></li><li><p>8位数据总线，8位地址总线。</p></li><li><p><mark>页面寄存器：扩充地址的高4位或8位</mark>。</p></li><li><p><code>DREQ</code> <code>DACK</code> DMA请求和响应。</p></li><li><p><code>HRQ</code> <code>HLDA</code> 总线请求和响应。</p></li><li><p><code>ADSTB</code> <mark>A<sub>7</sub>-A<sub>0</sub>输出地址低8位，D<sub>7</sub>-D<sub>0</sub>输出高8位，由于数据总线复用了，ADSTB使外挂的地址锁存器将地址锁存</mark>。</p></li><li><p><code>AEN</code> 总线独占信号，使CPU总线信号无效。</p></li><li><p>工作模式</p><ul><li>单字节传送：每次DMA传1个字节，当前地址寄存器和当前字节计数器自动修改，DMAC和CPU轮流控制总线，结束后输出EOP.</li><li>数据块传送：可以被EOP中止。</li><li>请求传输：DREQ=0时可以暂停，可以被EOP中止。</li><li>级联方式。</li></ul></li><li><p>传送类型</p><ul><li>读IO写MEM.</li><li>读MEM写IO.</li><li><mark>MEM到MEM，用通道0读，用通道1写，第一个DMA周期读到数据总线并存入内部暂存器，第二个周期内部暂存器写到数据总线</mark>。</li></ul></li><li><p>优先级</p><ul><li>固定。</li><li>循环，最近被服务过的最低。</li></ul></li><li><p>编程步骤</p><ul><li>主清除软命令。</li><li>写页面寄存器（地址的高4位）。</li><li>写当前地址（先低后高）。</li><li>写当前计数（先低后高）。</li><li>写模式寄存器。</li><li>写命令寄存器。</li><li>写屏蔽寄存器。</li><li>写请求寄存器。</li></ul></li></ul><h3><a name='header-n295' class='md-header-anchor '></a>总线</h3><ul><li><p>总线由传输信息的物理介质和一套管理信息传输的通用规则构成。</p></li><li><p>功能分类：数据总线、地址总线、控制总线、电源和地、备用线。</p></li><li><p>层次分类：片总线（片内总线、片间总线）、内总线、外总线。</p></li><li><p>总线操作过程</p><ul><li>总线请求和仲裁：由主模块提出总线请求，由总线仲裁器分配。</li><li>寻址：取得使用权的主模块在地址总线发出从模块的地址。</li><li>传输。</li><li>结束：撤除相关信息，交权。</li></ul></li></ul></div>
</body>
</html>